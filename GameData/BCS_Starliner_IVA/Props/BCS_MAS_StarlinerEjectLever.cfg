PROP
{
  name = BCS_MAS_StarlinerEjectLever

 	MODEL
	{
		model = BCS_Starliner_IVA/Props/BCS_MAS_StarlinerEjectLever
	}

  SHABBY_MATERIAL_REPLACE
  {
    materialDef = BCS_starliner_IVA_instrumentProps_Resurfaced
    targetMaterial = BCS_starliner_IVA_instrumentProps
  }

	MODULE
	{
		name = MASComponent
		
		COLLIDER_EVENT
		{
			name = Lever Collider
			collider = EjectLeverCollider
      onClick = fc.SetPersistent("Global_Abort_Fire", 1)
      onRelease = fc.SetPersistent("Global_Abort_Fire", 0 + fc.SetPersistent("Global_Abort_Timer", 0))
		}

    ROTATION
    {
	    name = Animator
	    transform = EjectLeverBody
	    startRotation = 0, 0, 0
	    endRotation = 0, 90, 0
	    variable = fc.GetPersistentAsNumber("Global_Abort_Fire")
	    range = 0.0, 1.0
	    blend = true
	    speed = 5.0
    }

    TRANSLATION
    {
	    name = Animator
	    transform = EjectLeverBody
	    startTranslation = 0, 0, 0
	    endTranslation = 0, 0, -0.016068
	    variable = fc.GetPersistentAsNumber("Global_Abort_Timer") == 1
	    blend = true
	    speed = 5.0
    }

    AUDIO_PLAYER
    {
	    name = Lever Up
	    sound = BCS_Starliner_IVA/Sounds/HeavyLeverUp
	    trigger = OFF
	    variable = fc.GetPersistentAsNumber("Global_Abort_Fire")
    }

    AUDIO_PLAYER
    {
	    name = Lever Down
	    sound = BCS_Starliner_IVA/Sounds/HeavyLeverDown
	    trigger = ON
	    variable = fc.GetPersistentAsNumber("Global_Abort_Fire")
    }

    AUDIO_PLAYER
    {
	    name = Lever In
	    sound = BCS_Starliner_IVA/Sounds/Solenoid
	    trigger = ON
	    variable = fc.GetPersistentAsNumber("Global_Abort_Timer") == 1
    }

    AUDIO_PLAYER
    {
	    name = Lever In
	    sound = ASET/ASET_Props/Sounds/beep_B_long_x3
	    trigger = ON
	    mustPlayOnce = true
	    variable = fc.GetPersistentAsNumber("Global_Abort_Timer") == 1
    }

    TRIGGER_EVENT
    {
	    name = Timer
	    event = fc.AddPersistentClamped("Global_Abort_Timer", 0.02, 0, 1)
	    variable = fc.GetPersistentAsNumber("Global_Abort_Fire")
	    autoRepeat = true
    }

    TRIGGER_EVENT
    {
	    name = Abort Event
	    event = fc.Abort()
	    variable = fc.GetPersistentAsNumber("Global_Abort_Timer") == 1
    }
	}
}