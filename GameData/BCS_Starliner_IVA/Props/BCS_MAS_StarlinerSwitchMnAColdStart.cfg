PROP
{
  name = BCS_MAS_StarlinerSwitchMnAColdStart

	MODEL
	{
		model = BCS_Starliner_IVA/Props/BCS_MAS_StarlinerSwitch
	}

  SHABBY_MATERIAL_REPLACE
  {
    materialDef = BCS_starliner_IVA_instrumentProps_Resurfaced
    targetMaterial = BCS_starliner_IVA_instrumentProps
  }

	MODULE
	{
		name = MASComponent
		
		COLLIDER_EVENT
		{
			name = Switch Collider
			collider = SwitchBodyCollider
			onClick = fc.SetPersistent("%AUTOID%_Toggle", 1)
			onRelease = fc.SetPersistent("%AUTOID%_Toggle", 0)
			sound = ASET/ASET_Props/Sounds/Tumbler3
			volume = 1
		}

		COLLIDER_EVENT
		{
			name = Switch Collider
			collider = SwitchBodyCollider
			onClick = fc.SetPersistent("Global_MnAColdStart", 1)
      variable = fc.GetPersistentAsNumber("Global_MnABatt") * fc.GetPersistentAsNumber("Global_MnABatt1") * fc.GetPersistentAsNumber("Global_MnABatt2") * fc.GetPersistentAsNumber("Global_MnABatt3") * fc.GetPersistentAsNumber("Global_MnABatt4")
		}

    ROTATION
    {
	    name = Switch Rotation
	    transform = SwitchLeverTransform
	    startRotation = 0, 20, 0
	    endRotation = 0, -20, 0
	    variable = fc.GetPersistentAsNumber("%AUTOID%_Toggle")
	    range = 0.0, 1.0
	    blend = true
	    speed = 10.0
    }

    COLOR_SHIFT
    {
      name = Backlight
      transform = SwitchLeverEmissive
      passiveColor = 0,0,0,255
      activeColor = COLOR_ASET_SWITCHER_BORDER_POSITIVECOLOR
      variable = fc.Conditioned(fc.GetPersistentAsNumber("Backlight") * fc.GetPersistentAsNumber("Global_PanelLightsToggle"))
      blend = true
      colorName = _EmissiveColor
    }

    TRIGGER_EVENT
    {
	    name = Power Toggler
	    event = fc.SetPersistent("MAS_Battery_State", 1)
	    exitEvent = fc.SetPersistent("MAS_Battery_State", 0)
	    variable = fc.GetPersistentAsNumber("MAS_Battery1_State") * fc.GetPersistentAsNumber("MAS_Battery2_State")
    }

    TRIGGER_EVENT
    {
	    name = Power Toggler
	    event = fc.SetPersistent("Global_MnAColdStart", 0)
	    variable = 1 - fc.GetPersistentAsNumber("Global_MnABatt") * fc.GetPersistentAsNumber("Global_MnABatt1") * fc.GetPersistentAsNumber("Global_MnABatt2") * fc.GetPersistentAsNumber("Global_MnABatt3") * fc.GetPersistentAsNumber("Global_MnABatt4")
    }

    TRIGGER_EVENT
    {
	    name = Power Toggler
	    event = fc.SetPersistent("MAS_Battery1_State", 1)
	    exitEvent = fc.SetPersistent("MAS_Battery1_State", 0)
	    variable = fc.GetPersistentAsNumber("Global_MnABatt") * fc.GetPersistentAsNumber("Global_MnABatt1") * fc.GetPersistentAsNumber("Global_MnABatt2") * fc.GetPersistentAsNumber("Global_MnABatt3") * fc.GetPersistentAsNumber("Global_MnABatt4") * fc.GetPersistentAsNumber("Global_MnAColdStart")
    }

    AUDIO_PLAYER
    {
	    name = Battery On
	    sound = BCS_Starliner_IVA/Sounds/BatteryOn
	    volume = 1.0
	    trigger = ON
	    variable = fc.GetPersistentAsNumber("MAS_Battery1_State")
	    mustPlayOnce = true
    }
	}
}