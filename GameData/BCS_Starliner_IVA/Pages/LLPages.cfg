MAS_PAGE
{
  name = MAS_BCS_IntroPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 0)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  IMAGE
  {
    name = BG
    texture = BCS_Starliner_IVA/Images/BCSLogoL
    position = 0, 0
    size = 1280, 832
    passiveColor = 255, 255, 255, 255
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_SystemsPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 1)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  softkey = 20, fc.AddPersistentWrapped("Global_MFDLLSelectedResourceBox", -1, 0, 4)
  softkey = 21, fc.AddPersistentWrapped("Global_MFDLLSelectedResourceBox", 1, 0, 4)
  softkey = 24, BCS_ResourceMonitorHandler(1)
  softkey = 25, BCS_ResourceMonitorHandler(0)

  //960x640
  TEXT
  {
    name = FMC Warning
    position = 36, 12.5
    textColor = 255, 0, 0, 255
    text = SMC1 OFF
    variable = fc.GetPersistentAsNumber("Global_SMC1_State") == 0 and fc.PeriodStep(2) == 1
  }

  SUB_PAGE
  {
    name = BCS_LL_ResourceMonitor
    position = 0, 128
    variable = fc.GetPersistentAsNumber("Global_SMC1_State")
  }
  //120x58
  //pad128x66
  SUB_PAGE
  {
    name = ESS Announcer
    position = 18, 67.6
  }

  SUB_PAGE
  {
    name = SMC1 Announcer
    position = 205.333, 67.6
  }

  SUB_PAGE
  {
    name = SMC2 Announcer
    position = 392.666, 67.6
  }

  SUB_PAGE
  {
    name = FMC2 Announcer
    position = 579.999, 67.6
  }

  SUB_PAGE
  {
    name = SMIPC3 Announcer
    position = 767.332, 67.6
  }

  SUB_PAGE
  {
    name = SIGI2 Announcer
    position = 954.665, 67.6
  }

  SUB_PAGE
  {
    name = VESTA2 Announcer
    position = 1142, 67.6
  }

  SUB_PAGE
  {
    name = Engine Announcer
    position = 1142, 160
  }

  SUB_PAGE
  {
    name = Gyro Announcer
    position = 1142, 252.4
  }

  SUB_PAGE
  {
    name = RCS Announcer
    position = 1142, 344.8
  }

  SUB_PAGE
  {
    name = RCS Thrust Announcer
    position = 1142, 437.2
  }

  SUB_PAGE
  {
    name = Solar Panel Announcer
    position = 1142, 529.6
  }

  SUB_PAGE
  {
    name = Thermal Announcer
    position = 1142, 622
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_AscentPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 2)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  softkey = 20, fc.AddPersistentWrapped("Global_MFDLLSelectedAscentAction", -1, 0, 6)
  softkey = 21, fc.AddPersistentWrapped("Global_MFDLLSelectedAscentAction", 1, 0, 6)

  softkey = 100, BCS_NumericalHandler(0)
  softkey = 101, BCS_NumericalHandler(1)
  softkey = 102, BCS_NumericalHandler(2)
  softkey = 103, BCS_NumericalHandler(3)
  softkey = 104, BCS_NumericalHandler(4)
  softkey = 105, BCS_NumericalHandler(5)
  softkey = 106, BCS_NumericalHandler(6)
  softkey = 107, BCS_NumericalHandler(7)
  softkey = 108, BCS_NumericalHandler(8)
  softkey = 109, BCS_NumericalHandler(9)
  softkey = 110, BCS_NumericalHandler(10)
  softkey = 111, BCS_NumericalHandler(11)
  softkey = 24, BCS_NumericalHandler(12)
  softkey = 25, BCS_ActionHandler()
  //640x312
  TEXT
  {
    name = Atmosphere boundary
    position = 0, 1
    textColor = COLOR_MFD2_TEXT
    text = Atmo:[#ffff9b]<=0,8:#,#0.0=>km @ <=1:METddd/hh:mm:ss=> $&$ fc.AtmosphereTop() * 0.001; fc.TimeToAtmosphere()
    variable = (fc.TimeToAtmosphere() * (fc.Altitude() < fc.AtmosphereTop()))
  }

  LINE_STRING
  {
    name = Scratch Pad Frame
    position = 16, 704
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 32
    vertex = 560, 32
    vertex = 560, 0
  }

  TEXT
  {
    name = Pip 1
    position = 0, 10
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedAscentAction") == 0
  }

  TEXT
  {
    name = Option 1
    position = 1, 10
    textColor = COLOR_MFD2_TEXT
    text = Desired Altitude:
  }

  TEXT
  {
    name = Option 1
    position = 1, 11
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ mechjeb.GetDesiredLaunchAltitude()
  }

  TEXT
  {
    name = Pip 2
    position = 0, 13
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedAscentAction") == 1
  }

  TEXT
  {
    name = Option 2
    position = 1, 13
    textColor = COLOR_MFD2_TEXT
    text = Desired Inclination:
  }

  TEXT
  {
    name = Option 2
    position = 1, 14
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ mechjeb.GetDesiredLaunchInclination()
  }

  TEXT
  {
    name = Pip 3
    position = 0, 16
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedAscentAction") == 2
  }

  TEXT
  {
    name = Option 3
    position = 1, 16
    textColor = COLOR_MFD2_TEXT
    text = Desired Roll:
  }

  TEXT
  {
    name = Option 3
    position = 1, 17
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ mechjeb.GetTurnRoll()
  }

  TEXT
  {
    name = Pip 4
    position = 0, 18
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedAscentAction") == 3
  }

  TEXT
  {
    name = Option 3
    position = 1, 18
    textColor = COLOR_MFD2_TEXT
    text = <=0=> $&$ fc.Select(mechjeb.GetForceRoll(), "[#ffff9b]^Enabled^", "[#afd3ff]^Disabled^")
  }

  TEXT
  {
    name = Pip 4
    position = 0, 20
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedAscentAction") == 4
  }

  TEXT
  {
    name = Option 3
    position = 1, 20
    textColor = COLOR_MFD2_TEXT
    text = <=0=> $&$ fc.Select(mechjeb.AscentAutopilotActive() * fc.PeriodStep(2), "[#ff0000]Execute", "Execute")
  }

  TEXT
  {
    name = Scratch Pad
    position = 1, 22
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ fc.GetPersistent("Global_AscentScratchPad")
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Throttle
    position = 704, 212
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Pod Skin Temp
    position = 864, 212
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Altitude
    position = 1024, 212
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Orbital Speed
    position = 1184, 212
  }

  SUB_PAGE
  {
    name = BCS_Ascent_LL
    position = 640, 456
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_PlannerPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 3)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  softkey = 20, BCS_PlannerArrowHandler(1)
  softkey = 21, BCS_PlannerArrowHandler(0)

  softkey = 22, BCS_PlannerAckHandler()
  softkey = 23, BCS_PlannerCancelHandler()

  softkey = 100, BCS_NumericalHandler(0)
  softkey = 101, BCS_NumericalHandler(1)
  softkey = 102, BCS_NumericalHandler(2)
  softkey = 103, BCS_NumericalHandler(3)
  softkey = 104, BCS_NumericalHandler(4)
  softkey = 105, BCS_NumericalHandler(5)
  softkey = 106, BCS_NumericalHandler(6)
  softkey = 107, BCS_NumericalHandler(7)
  softkey = 108, BCS_NumericalHandler(8)
  softkey = 109, BCS_NumericalHandler(9)
  softkey = 110, BCS_NumericalHandler(10)
  softkey = 111, BCS_NumericalHandler(11)
  softkey = 24, BCS_NumericalHandler(12)
  softkey = 25, BCS_PlannerActionHandler()

//13
//8
  TEXT
  {
    name = Pip
    position = 0, 2
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 0 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 1
    textColor = COLOR_MFD2_TEXT
    text = Circularize at$$$[#ffff9b]Apoapsis  Periapsis
  }

  TEXT
  {
    name = Pip
    position = 10, 2
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 1 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Pip
    position = 0, 4
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 2 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 4
    textColor = COLOR_MFD2_TEXT
    text = NodeT: [#ffff9b]<=0,12:MET+dd:hh:mm:ss=> $#$ fc.ManeuverNodeTime()
  }

  TEXT
  {
    name = Pip
    position = 0, 5
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 3 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 5
    textColor = COLOR_MFD2_TEXT
    text = Halve nodeT
  }

  TEXT
  {
    name = Pip
    position = 0, 7
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 4 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 7
    textColor = COLOR_MFD2_TEXT
    text = << Place node at >>
  }

  TEXT
  {
    name = Pip
    position = 0, 12
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 5 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 12
    textColor = COLOR_MFD2_TEXT
    text = Calculate transfer to target
  }

  TEXT
  {
    name = Pip
    position = 0, 15
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 6 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Pip
    position = 0, 16
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 7 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Pip
    position = 0, 17
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 8 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 14
    textColor = COLOR_MFD2_TEXT
    text = Node data$$$Prograde:$$$Radial:$$$Normal:
  }

  TEXT
  {
    name = Text
    position = 15, 15
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0,8:####0.00=> $&$ fc.ManeuverNodeDVPrograde()
  }

  TEXT
  {
    name = Text
    position = 15, 16
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0,8:####0.00=> $&$ fc.ManeuverNodeDVRadial()
  }

  TEXT
  {
    name = Text
    position = 15, 17
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0,8:####0.00=> $&$ fc.ManeuverNodeDVNormal()
  }

  TEXT
  {
    name = Pip
    position = 0, 19
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 9 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 19
    textColor = COLOR_MFD2_TEXT
    text = Clear node data
  }

  TEXT
  {
    name = Pip
    position = 0, 20
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 10 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Text
    position = 1, 20
    textColor = COLOR_MFD2_TEXT
    text = Warp to node
  }

  LINE_STRING
  {
    name = Scratch Pad Frame
    position = 16, 704
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 32
    vertex = 560, 32
    vertex = 560, 0
  }

  TEXT
  {
    name = Scratch Pad
    position = 1, 22
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ fc.GetPersistent("Global_AscentScratchPad")
  }

  LINE_STRING
  {
    name = Separator
    position = 640, 0
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 768
  }

  TEXT
  {
    name = Pip
    position = 40, 1
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 11 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Targeting options
    position = 41, 1
    textColor = COLOR_MFD2_TEXT
    text = << Celestials >>
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 80
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 96

    variable = fc.BodyTargetIndex() ~= fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 80
    startColor = COLOR_MFD2_TEXT_HIGHLIGHT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 96

    variable = fc.BodyTargetIndex() == fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")
  }

  TEXT
  {
    name = Targeting options
    position = 42, 2
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=><=1=><=2=>$&$ fc.BodyName(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")); fc.Select(fc.BodyIsMoon(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")), ", moon of ", ""); fc.Select(fc.BodyIsMoon(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")), fc.BodyName(fc.BodyParent(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex"))), "")
  }

  TEXT
  {
    name = Targeting options
    position = 42, 3
    textColor = COLOR_MFD2_TEXT
    text = Distance:  [#ffff9b]<=0,4:SIP###0=>m $&$ fc.BodyDistance(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 4
    textColor = COLOR_MFD2_TEXT
    text = SOI:       [#ffff9b]<=0,4:SIP###0=>m $&$ fc.BodySoI(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 5
    textColor = COLOR_MFD2_TEXT
    text = Atmo. Top: [#ffff9b]<=0,4:SIP###0=><=1=> $&$ fc.Select(fc.BodyHasAtmosphere(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")), fc.BodyAtmosphereTop(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")), "------"); fc.Select(fc.BodyHasAtmosphere(fc.GetPersistentAsNumber("Global_MFDLLSelectedCelestialIndex")), "m", "-")
  }

  TEXT
  {
    name = Pip
    position = 40, 10
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 12 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Targeting options
    position = 41, 10
    textColor = COLOR_MFD2_TEXT
    text = << Vessels >>
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 368
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 32

    variable = fc.TargetVesselIndex() ~= fc.GetPersistentAsNumber("Global_MFDLLSelectedVesselIndex")
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 368
    startColor = COLOR_MFD2_TEXT_HIGHLIGHT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 32

    variable = fc.TargetVesselIndex() == fc.GetPersistentAsNumber("Global_MFDLLSelectedVesselIndex")
  }

  TEXT
  {
    name = Targeting options
    position = 42, 11
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ fc.TargetVesselName(fc.GetPersistentAsNumber("Global_MFDLLSelectedVesselIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 12
    textColor = COLOR_MFD2_TEXT
    text = Distance:  [#ffff9b]<=0,4:SIP###0=>m $&$ fc.TargetVesselDistance(fc.GetPersistentAsNumber("Global_MFDLLSelectedVesselIndex"))
  }

  TEXT
  {
    name = Pip
    position = 40, 17
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedPlannerAction") == 13 and fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode") == 0
  }

  TEXT
  {
    name = Targeting options
    position = 41, 17
    textColor = COLOR_MFD2_TEXT
    text = << Waypoints >>
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 592
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 96

    variable = nav.GetWaypointIndex() ~= fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex")
  }

  LINE_STRING
  {
    name = Separator
    position = 664, 592
    startColor = COLOR_MFD2_TEXT_HIGHLIGHT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 96

    variable = nav.GetWaypointIndex() == fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex")
  }

  TEXT
  {
    name = Targeting options
    position = 42, 18
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $&$ nav.WaypointName(fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 19
    textColor = COLOR_MFD2_TEXT
    text = Distance:  [#ffff9b]<=0,4:SIP###0=>m $&$ nav.WaypointDistance(fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 20
    textColor = COLOR_MFD2_TEXT
    text = Bearing:   [#ffff9b]<=0:0.0=>° $&$ nav.WaypointBearing(fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex"))
  }

  TEXT
  {
    name = Targeting options
    position = 42, 21
    textColor = COLOR_MFD2_TEXT
    text = Altitude:  [#ffff9b]<=0:SIP###0=>m $&$ nav.WaypointAltitude(fc.GetPersistentAsNumber("Global_MFDLLSelectedWaypointIndex"))
  }

  SUB_PAGE
  {
    name = BCS_PlannerOptions_LL
    position = 24, 48
    variable = fc.GetPersistentAsNumber("Global_MFDLLPlannerPageMode")
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_SciencePageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 4)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  softkey = 20, fc.AddPersistentWrapped("Global_MFDLLSelectedScienceAction", -1, 0, 10)
  softkey = 21, fc.AddPersistentWrapped("Global_MFDLLSelectedScienceAction", 1, 0, 10)

  softkey = 24, BCS_ScienceClearHandler()
  softkey = 25, BCS_ScienceActionHandler()

  LINE_STRING
  {
    name = Separator
    position = 640, 0
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 768
  }

  LINE_STRING
  {
    name = Separator
    position = 640, 384
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 640, 0
  }

  TEXT
  {
    name = Pip
    position = 10.21875, 0.140625
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 0
  }

  TEXT
  {
    name = Title
    position = 11.21875, 0.140625
    textColor = COLOR_MFD2_TEXT
    text = << Science Type >>
  }

  IMAGE
  {
    name = Generic Science Graphic
    texture = BCS_Starliner_IVA/Images/ScienceIcon
    passiveColor = COLOR_MFD2_TEXT
    position = 195.5, 36.5
    size = 256, 256
  }

  IMAGE
  {
    name = Gravity Scan Graphic
    texture = BCS_Starliner_IVA/Images/sensorGravimeter_icon
    position = 195.5, 36.5
    size = 256, 256
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex") == fc.ScienceTypeId("gravityScan")
  }

  IMAGE
  {
    name = Temperature Scan Graphic
    texture = BCS_Starliner_IVA/Images/sensorThermometer_icon
    position = 195.5, 36.5
    size = 256, 256
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex") == fc.ScienceTypeId("temperatureScan")
  }

  IMAGE
  {
    name = Baro Scan Graphic
    texture = BCS_Starliner_IVA/Images/sensorBarometer_icon
    position = 195.5, 36.5
    size = 256, 256
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex") == fc.ScienceTypeId("barometerScan")
  }

  IMAGE
  {
    name = Seismic Scan Graphic
    texture = BCS_Starliner_IVA/Images/sensorAccelerometer_icon
    position = 195.5, 36.5
    size = 256, 256
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex") == fc.ScienceTypeId("seismicScan")
  }

  IMAGE
  {
    name = Crew Report Graphic
    texture = BCS_Starliner_IVA/Images/CrewCapsule_icon
    position = 195.5, 36.5
    size = 256, 256
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex") == fc.ScienceTypeId("crewReport")
  }

  TEXT
  {
    name = Pip
    position = 51.5, 0.140625
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 6
  }

  TEXT
  {
    name = Title
    position = 52.5, 0.140625
    textColor = COLOR_MFD2_TEXT
    text = << Container >>
  }

  IMAGE
  {
    name = Container Graphic
    texture = BCS_Starliner_IVA/Images/ScienceBox_icon
    position = 827.5, 36.5
    size = 256, 256
  }

  TEXT
  {
    name = Science Name
    position = 59.71875 - BCS_CharCounter(fc.ScienceContainerName(fc.GetPersistentAsNumber("Global_MFDLLSelectedContainerIndex"))), 9.140625
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $#$ fc.ScienceContainerName(fc.GetPersistentAsNumber("Global_MFDLLSelectedContainerIndex"))
  }

  POLYGON
  {
    name = Arrow
    position = 640, 192
    color = 0, 0, 0, 255

    vertex = -30, -30
    vertex = -30, 30
    vertex = 30, 0
  }

  POLYGON
  {
    name = Arrow
    position = 640, 576
    color = 0, 0, 0, 255

    vertex = -30, -30
    vertex = -30, 30
    vertex = 30, 0
  }

  POLYGON
  {
    name = Arrow
    position = 960, 384
    color = 0, 0, 0, 255

    vertex = -30, -30
    vertex = 0, 30
    vertex = 30, -30
  }

  LINE_STRING
  {
    name = Arrow
    position = 640, 192
    startColor = COLOR_MFD2_TEXT
    startWidth = 4
    loop = true

    vertex = -30, -30
    vertex = -30, 30
    vertex = 30, 0
  }

  LINE_STRING
  {
    name = Arrow
    position = 640, 576
    startColor = COLOR_MFD2_TEXT
    startWidth = 4
    loop = true

    vertex = -30, -30
    vertex = -30, 30
    vertex = 30, 0
  }

  LINE_STRING
  {
    name = Arrow
    position = 960, 384
    startColor = COLOR_MFD2_TEXT
    startWidth = 4
    loop = true

    vertex = -30, -30
    vertex = 0, 30
    vertex = 30, -30
  }

  TEXT
  {
    name = Pip
    position = 37.125, 5.5
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 4
  }

  TEXT
  {
    name = Pip
    position = 37.125, 17.5
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 5
  }

  TEXT
  {
    name = Pip
    position = 57.125, 11.5
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 8
  }

  TEXT
  {
    name = Pip
    position = 41, 10
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 7
  }

  TEXT
  {
    name = Option
    position = 42, 10
    textColor = COLOR_MFD2_TEXT
    text = Dump
  }

  TEXT
  {
    name = Size
    position = 64, 10
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0,10:#0.0=> [#afd3ff]mits $&$ fc.ScienceContainerDataSize(fc.GetPersistentAsNumber("Global_MFDLLSelectedContainerIndex"))
  }

  TEXT
  {
    name = Science Name
    position = 20.21875 - BCS_CharCounter(fc.ScienceType(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"))), 9.140625
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0=> $#$ fc.ScienceType(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"))
  }

  TEXT
  {
    name = Title
    position = 1, 12
    textColor = COLOR_MFD2_TEXT
    text = << Experiments >>
  }

  TEXT
  {
    name = Pip
    position = 1, 13
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 1
  }

  TEXT
  {
    name = Title
    position = 2, 13
    textColor = COLOR_MFD2_TEXT
    text = Selected [#ffff9b]<=0=> [#afd3ff]of [#ffff9b]<=1=> [#afd3ff]/ Id[#ffff9b]<=2=> $&$ fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex") + 1; fc.ExperimentCount(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex")); fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex"))
  }

  TEXT
  {
    name = Pip
    position = 1, 14
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 2
  }

  TEXT
  {
    name = Title
    position = 2, 14
    textColor = COLOR_MFD2_TEXT
    text = Execute
  }

  TEXT
  {
    name = Pip
    position = 1, 15
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 3
  }

  TEXT
  {
    name = Title
    position = 2, 15
    textColor = COLOR_MFD2_TEXT
    text = Reset
  }

  TEXT
  {
    name = Title
    position = 1, 17
    textColor = COLOR_MFD2_TEXT
    text = << Experiment Data >>
  }

  TEXT
  {
    name = Title
    position = 2, 18
    textColor = COLOR_MFD2_TEXT
    text = At [#ffff9b]<=0=> [#afd3ff]while [#ffff9b]<=1=> $&$ fc.ExperimentBiome(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex"))); fc.ExperimentSituation(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
    variable = fc.ExperimentStatus(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
  }

  TEXT
  {
    name = Title
    position = 2, 19
    textColor = COLOR_MFD2_TEXT
    text = Using [#ffff9b]<=0:0.0=> [#afd3ff]mits for [#ffff9b]<=1:0.0=> [#afd3ff]science $&$ fc.ExperimentDataSize(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex"))); fc.ExperimentScienceValue(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
    variable = fc.ExperimentStatus(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
  }

  TEXT
  {
    name = Title
    position = 1, 21
    textColor = COLOR_MFD2_TEXT
    text = << Experiment Result >>
    variable = fc.ExperimentStatus(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
  }

  TEXT
  {
    name = Title
    position = 2, 22
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = [hw]<=0=> $&$ fc.ScrollingMarquee(fc.ExperimentResults(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex"))), 72, 0.2)
    variable = fc.ExperimentStatus(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
  }

  TEXT
  {
    name = Title
    position = 2, 20
    textColor = COLOR_MFD2_TEXT
    text = No data
    variable = 1 - fc.ExperimentStatus(fc.ExperimentId(fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceTypeIdIndex"), fc.GetPersistentAsNumber("Global_MFDLLSelectedExperimentIndex")))
  }

  TEXT
  {
    name = Pip
    position = 44.5, 13.578125
    textColor = 255, 0, 0, 255
    text = >
    variable = fc.GetPersistentAsNumber("Global_MFDLLSelectedScienceAction") == 9
  }

  TEXT
  {
    name = Title
    position = 45.5, 13.578125
    textColor = COLOR_MFD2_TEXT
    text = << Transmitter >>
  }

  IMAGE
  {
    name = Antenna Graphic
    texture = BCS_Starliner_IVA/Images/commDish_icon
    position = 731.5, 466.5
    size = 256, 256
  }

  TEXT
  {
    name = Title
    position = 2, 19
    textColor = COLOR_MFD2_TEXT
    text = No valid transmitters
    variable = 1 - fc.DataTransmitterCount()
  }

  TEXT
  {
    name = Title
    position = 42, 22
    textColor = COLOR_MFD2_TEXT
    text = Using [#ffff9b]<=0=> [#afd3ff]of [#ffff9b]<=1=> [#afd3ff]/ <=2=> $&$ fc.GetPersistentAsNumber("Global_MFDLLSelectedTransmitterIndex") + 1; fc.DataTransmitterCount(); fc.Select(fc.DataTransmitterAvailable(fc.GetPersistentAsNumber("Global_MFDLLSelectedTransmitterIndex")), "[#00ff00]Online", "[#ff0000]Offline")
    variable = fc.DataTransmitterCount() > 0
  }

  SUB_PAGE
  {
    name = 3/4 CommNet Circle Gauge
    position = 1164, 652
  }

  SUB_PAGE
  {
    name = 3/4 Antenna Circle Gauge
    position = 1164, 472
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_ESSTacPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 5)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  SUB_PAGE
  {
    name = 3/4 Oxygen Circle Gauge
    position = 64+64, 64+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 CO2 Circle Gauge
    position = 256+64, 64+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Food Circle Gauge
    position = 64+64, 288+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Waste Circle Gauge
    position = 256+64, 288+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Water Circle Gauge
    position = 64+64, 512+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Waste Water Circle Gauge
    position = 256+64, 512+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Electricity Circle Gauge
    position = 1088+64, 512+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Internal Temperature Circle Gauge
    position = 928+64, 512+64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 28, 1
    textColor = COLOR_MFD2_TEXT
    text = Estimated remaining use
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 28, 4
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Oxygen") / (0.00042838439059625 * fc.VesselCrewCount())
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 28, 11
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Food") / (0.00000423177083325 * fc.VesselCrewCount())
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 28, 18
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Water") / (0.000002797019676 * fc.VesselCrewCount())
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = No ESS
    position = 36, 11.5
    textColor = 255, 0, 0, 255
    text = ESS Inop
    variable = fc.AssemblyLoaded("TacLifeSupport") == 0 and fc.PeriodStep(2) == 1
  }

  LINE_STRING
  {
    name = Arrow
    position = 32, 736
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 32
    vertex = 1216, 32
    vertex = 1216, 0
  }

  LINE_STRING
  {
    name = Arrow
    position = 64, 257
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 640, 0

    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  LINE_STRING
  {
    name = Arrow
    position = 64, 478
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 640, 0

    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  COMPOUND_TEXT
  {
    name = Warnings
    position = 2, 22
    maxLines = 2
    variable = fc.AssemblyLoaded("TacLifeSupport")

    TEXT
    {
      name = No ESS
      text = [#<=0=>]ESS Inop $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.GetPersistentAsNumber("Global_ESS_State")
    }

    TEXT
    {
      name = Oxygen off
      text = [#<=0=>]Oxygen off $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = fc.ResourceLocked("Oxygen")
    }

    TEXT
    {
      name = No oxygen
      text = [#<=0=>]No oxygen $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Oxygen")
    }

    TEXT
    {
      name = No water
      text = [#<=0=>]No water $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Water")
    }

    TEXT
    {
      name = No food
      text = [#<=0=>]No food $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Food")
    }

    TEXT
    {
      name = Temp Warning
      text = [#<=0=>]Temperature warning $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = fc.Remap(fc.InternalTemperature(true), 273.15, fc.InternalMaxTemperature(true), 0, 1) > 0.9
    }

    TEXT
    {
      name = Low oxygen
      text = [#ffff9b]Low oxygen
      variable = fc.ResourcePercent("Oxygen") < 0.15
    }

    TEXT
    {
      name = Low water
      text = [#ffff9b]Low water
      variable = fc.ResourcePercent("Water") < 0.15
    }

    TEXT
    {
      name = Low food
      text = [#ffff9b]Low food
      variable = fc.ResourcePercent("Food") < 0.15
    }
  }

  SUB_PAGE
  {
    name = ESS Announcer
    position = 1104, 64
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Oxygen Generator Announcer
    position = 1104, 179
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Water Generator Announcer
    position = 1104, 295
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Electric Generator Announcer
    position = 1104, 410
    variable = fc.AssemblyLoaded("TacLifeSupport") * fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_ESSKerbalismPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 5)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  SUB_PAGE
  {
    name = 3/4 Oxygen Circle Gauge
    position = 32+64, 32+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Scrubber Circle Gauge
    position = 192+64, 32+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Atmosphere Circle Gauge
    position = 351+64, 32+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Nitrogen Circle Gauge
    position = 510+64, 32+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Pressure Control Circle Gauge
    position = 670+64, 32+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Food Circle Gauge
    position = 32+64, 288+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Waste Circle Gauge
    position = 192+64, 288+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Water Circle Gauge
    position = 32+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Waste Water Circle Gauge
    position = 192+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Water Recycler Circle Gauge
    position = 350+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Electricity Circle Gauge
    position = 1088+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Internal Temperature Circle Gauge
    position = 928+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = 3/4 Shielding Circle Gauge
    position = 770+64, 544+64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 1, 6.59375
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Oxygen") / (0.00172379825 * fc.VesselCrewCount())
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 1, 14.53125
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Food") / (0.000012149461898 * fc.VesselCrewCount())
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  TEXT
  {
    name = Title
    position = 1, 22.4375
    textColor = COLOR_MFD2_TEXT_HIGHLIGHT
    text = <=0:METd:hh:mm:ss=> $&$ fc.ResourceCurrent("Water") / (0.00000622106481481 * fc.VesselCrewCount())
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  LINE_STRING
  {
    name = Arrow
    position = 64, 262
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 640, 0

    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  LINE_STRING
  {
    name = Arrow
    position = 64, 516
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 640, 0

    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  LINE_STRING
  {
    name = Arrow
    position = 336, 32
    startColor = COLOR_MFD2_TEXT
    startWidth = 4

    vertex = 0, 0
    vertex = 0, 160

    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  COMPOUND_TEXT
  {
    name = Warnings
    position = 48.125, 22.4375
    maxLines = 1

    TEXT
    {
      name = No ESS
      text = [#<=0=>]ESS Inop $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.GetPersistentAsNumber("Global_ESS_State")
    }

    TEXT
    {
      name = Oxygen off
      text = [#<=0=>]Oxygen off $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = fc.ResourceLocked("Oxygen")
    }

    TEXT
    {
      name = No oxygen
      text = [#<=0=>]No oxygen $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Oxygen")
    }

    TEXT
    {
      name = No water
      text = [#<=0=>]No water $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Water")
    }

    TEXT
    {
      name = No food
      text = [#<=0=>]No food $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = 1 - fc.ResourceCurrent("Food")
    }

    TEXT
    {
      name = Temp Warning
      text = [#<=0=>]Temperature warning $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
      variable = fc.Remap(fc.InternalTemperature(true), 273.15, fc.InternalMaxTemperature(true), 0, 1) > 0.9
    }

    TEXT
    {
      name = Low oxygen
      text = [#ffff9b]Low oxygen
      variable = fc.ResourcePercent("Oxygen") < 0.15
    }

    TEXT
    {
      name = Low water
      text = [#ffff9b]Low water
      variable = fc.ResourcePercent("Water") < 0.15
    }

    TEXT
    {
      name = Low food
      text = [#ffff9b]Low food
      variable = fc.ResourcePercent("Food") < 0.15
    }
  }

  SUB_PAGE
  {
    name = ESS Announcer
    position = 1104, 64
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Oxygen Generator Kerbalism Announcer
    position = 1104, 151
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = CO2 Scrubber Kerbalism Announcer
    position = 1104, 237
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Water Generator Kerbalism Announcer
    position = 1104, 324
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = Electric Generator Announcer
    position = 1104, 410
    variable = fc.GetPersistentAsNumber("Global_ESS_State")
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}

MAS_PAGE
{
  name = MAS_BCS_ISRUPageLL

  onEntry = fc.SetPersistent("MFDLL_Page", 6)

  softkey = 0, fc.SetPersistent("MFD_LL", "MAS_BCS_SystemsPageLL")
  softkey = 1, fc.SetPersistent("MFD_LL", "MAS_BCS_AscentPageLL")
  softkey = 2, fc.SetPersistent("MFD_LL", "MAS_BCS_PlannerPageLL")
  softkey = 3, fc.SetPersistent("MFD_LL", "MAS_BCS_SciencePageLL")
  softkey = 4, BCS_ESSHandler()
  softkey = 5, fc.SetPersistent("MFD_LL", "MAS_BCS_ISRUPageLL")
  softkey = 6, fc.SetPersistent("MFD_LL", "MAS_BCS_IntroPageLL")

  softkey = 20, fc.AddPersistentWrapped("Global_MFDLLSelectedISRUAction", -1, 0, 6)
  softkey = 21, fc.AddPersistentWrapped("Global_MFDLLSelectedISRUAction", 1, 0, 6)

  softkey = 24, BCS_ISRUClearHandler()
  softkey = 25, BCS_ISRUActionHandler()

  IMAGE
  {
    name = Drill
    texture = BCS_Starliner_IVA/Images/DrillWrap
    passiveColor = 115, 115, 115, 255
    activeColor = 240, 240, 240, 255
    colorVariable = fc.DrillDeployedCount() > 0
    position = 835, 47
    size = 108, 673
    uvShift = 0, 0 + fc.GetPersistentAsNumber("%AUTOID%_DrillUVAnimator")
    wrap = true
  }

  IMAGE
  {
    name = Mask
    texture = BCS_Starliner_IVA/Images/ISRUMask
    position = 0, 0
    size = 1280, 832
  }

  TEXT
  {
    name = No Power
    position = 24.125, 11.5
    text = [#<=0=>]No SM power $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
    variable = 1 - (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt"))
  }

  TEXT
  {
    name = Pip
    position = 1, 2
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 0
  }

  TEXT
  {
    name = Option
    position = 2, 2
    textColor = COLOR_MFD2_TEXT
    text = <=0=> $&$ fc.Select(fc.DrillDeployedCount() > 0, "Retract drill(s)", "Extend drill(s)")
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  TEXT
  {
    name = Pip
    position = 1, 3
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 1
  }

  TEXT
  {
    name = Option
    position = 2, 3
    textColor = COLOR_MFD2_TEXT
    text = <=0=> $&$ fc.Select(fc.DrillActiveCount() > 0, "Stop drill(s)", "Start drill(s)")
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  TEXT
  {
    name = Pip
    position = 38.625, 19
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 2
  }

  TEXT
  {
    name = Pip
    position = 60.3125, 3.5
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 3
  }

  TEXT
  {
    name = Pip
    position = 60.3125, 11.5
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 4
  }

  TEXT
  {
    name = Pip
    position = 60.3125, 19.40625
    textColor = 255, 0, 0, 255
    text = >
    variable = (fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")) == 1 and fc.GetPersistentAsNumber("Global_MFDLLSelectedISRUAction") == 5
  }

  TEXT
  {
    name = Active
    position = 62.0625, 3.5
    textColor = 0, 255, 0, 255
    text = ►
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt") * fc.GetResourceConverterActive(1) * fc.PeriodStep(2)
  }

  TEXT
  {
    name = Active
    position = 62.0625, 11.5
    textColor = 0, 255, 0, 255
    text = ►
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt") * fc.GetResourceConverterActive(2) * fc.PeriodStep(2)
  }

  TEXT
  {
    name = Active
    position = 62.0625, 19.40625
    textColor = 0, 255, 0, 255
    text = ►
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt") * fc.GetResourceConverterActive(3) * fc.PeriodStep(2)
  }

  SUB_PAGE
  {
    name = 3/4 Drill Temperature Circle Gauge
    position = 64+64, 544+80
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  SUB_PAGE
  {
    name = 3/4 Drill Efficiency Circle Gauge
    position = 256+64, 544+80
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  SUB_PAGE
  {
    name = 3/4 Resource Abundance Circle Gauge
    position = 448+64, 544+80
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  SUB_PAGE
  {
    name = 3/4 Selected Resource Amount Circle Gauge
    position = 640+64, 544+80
    variable = fc.GetPersistentAsNumber("Global_SMMnABatt") * fc.GetPersistentAsNumber("Global_SMMnBBatt")
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Total Liquid Fuel
    position = 1088+64, 48+80
    variable = fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Total Oxidizer
    position = 1088+64, 304+80
    variable = fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  SUB_PAGE
  {
    name = 3/4 Gauge Total MonoPropellant
    position = 1088+64, 557+80
    variable = fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  TEXT
  {
    name = No Power
    position = 68, 3.5
    text = [#<=0=>]SMC1 off $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
    variable = 1 - fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  TEXT
  {
    name = No Power
    position = 68, 11.5
    text = [#<=0=>]SMC1 off $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
    variable = 1 - fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  TEXT
  {
    name = No Power
    position = 68, 19.40625
    text = [#<=0=>]SMC1 off $&$ fc.Select(fc.PeriodStep(2), "ff0000", "800000")
    variable = 1 - fc.GetPersistentAsNumber("Global_SMC1_State")
  }

  SUB_PAGE
  {
    name = BCS_Lower_Bar_LL
    position = 0, 768
  }
}